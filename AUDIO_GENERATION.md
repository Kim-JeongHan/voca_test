# TTS Audio Pre-generation

ëª¨ë“  ë‹¨ì–´ì˜ TTS ì˜¤ë””ì˜¤ë¥¼ ë¯¸ë¦¬ ìƒì„±í•˜ì—¬ `docs/audio/` í´ë”ì— ì €ì¥í•©ë‹ˆë‹¤.

## íŠ¹ì§•

- âœ… **ì´ë¯¸ ìƒì„±ëœ íŒŒì¼ì€ ì¬ìƒì„±í•˜ì§€ ì•ŠìŒ** (íŒŒì¼ ì¡´ì¬ ì—¬ë¶€ ë° í¬ê¸° í™•ì¸)
- âœ… **ì¬ê°œ ê°€ëŠ¥** (ì¤‘ë‹¨ í›„ ë‹¤ì‹œ ì‹¤í–‰í•˜ë©´ ì´ì–´ì„œ ì§„í–‰)
- âœ… **Free Dictionary API ìš°ì„  ì‚¬ìš©** (ë¬´ë£Œ, ì •í™•í•œ ë°œìŒ)
- âœ… **ElevenLabs API Fallback** (ë¹„ìš© ë°œìƒ, ëª¨ë“  í…ìŠ¤íŠ¸ ì§€ì›)
- âœ… **ì§„í–‰ ìƒí™© í‘œì‹œ** (tqdm í”„ë¡œê·¸ë ˆìŠ¤ ë°”)
- âœ… **í†µê³„ ë¦¬í¬íŠ¸** (ì„±ê³µ/ì‹¤íŒ¨/ê±´ë„ˆë›´ íŒŒì¼ ìˆ˜)

## ì‚¬ìš©ë²•

### 1. Python íŒ¨í‚¤ì§€ ì„¤ì¹˜

```bash
pip install -r requirements.txt
```

### 2. (ì„ íƒ) ElevenLabs API í‚¤ ì„¤ì •

Dictionary APIë¡œ ì»¤ë²„ë˜ì§€ ì•ŠëŠ” ë‹¨ì–´ë¥¼ ìœ„í•´ ElevenLabsë¥¼ ì‚¬ìš©í•˜ë ¤ë©´:

```bash
# .env íŒŒì¼ ìƒì„±
echo "ELEVENLABS_API_KEY=your_api_key_here" > .env
```

API í‚¤ê°€ ì—†ìœ¼ë©´ Dictionary APIë§Œ ì‚¬ìš©í•©ë‹ˆë‹¤.

### 3. ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰

```bash
python3 generate_audio.py
```

### 4. ê²°ê³¼ í™•ì¸

ìƒì„±ëœ ì˜¤ë””ì˜¤ íŒŒì¼ì€ `docs/audio/` í´ë”ì— ì €ì¥ë©ë‹ˆë‹¤:

```
docs/audio/
â”œâ”€â”€ abandon_a1b2c3d4.mp3
â”œâ”€â”€ ability_e5f6g7h8.mp3
â”œâ”€â”€ ...
```

### 5. GitHubì— ì»¤ë°‹

```bash
git add docs/audio/
git commit -m "Add pre-generated TTS audio files"
git push
```

## ì‘ë™ ë°©ì‹

### íŒŒì¼ëª… ìƒì„± ê·œì¹™

ê° ë‹¨ì–´ëŠ” ê³ ìœ í•œ íŒŒì¼ëª…ì„ ê°€ì§‘ë‹ˆë‹¤:
- í˜•ì‹: `{safe_word}_{hash}.mp3`
- `safe_word`: ì˜ë¬¸/ìˆ«ìë§Œ í¬í•¨ (ìµœëŒ€ 20ì)
- `hash`: MD5 í•´ì‹œ ì• 8ì (íŠ¹ìˆ˜ë¬¸ì ëŒ€ì‘)

ì˜ˆì‹œ:
- `hello` â†’ `hello_5d41402a.mp3`
- `don't` â†’ `dont_b8c37e33.mp3`

### ì¤‘ë³µ ìƒì„± ë°©ì§€

ìŠ¤í¬ë¦½íŠ¸ëŠ” ë‹¤ìŒ ì¡°ê±´ì„ **ëª¨ë‘** í™•ì¸í•˜ì—¬ ì¬ìƒì„±ì„ ë°©ì§€í•©ë‹ˆë‹¤:

1. **ìˆ˜ì§‘ ë‹¨ê³„**: CSVì—ì„œ ë‹¨ì–´ ìˆ˜ì§‘ â†’ ì¤‘ë³µ ì œê±°
2. **í•„í„°ë§ ë‹¨ê³„**: ì´ë¯¸ ì¡´ì¬í•˜ëŠ” íŒŒì¼ í™•ì¸
3. **ìƒì„± ì „ ìµœì¢… í™•ì¸**: íŒŒì¼ ì¡´ì¬ ë° í¬ê¸° ê²€ì¦ (ìµœì†Œ 1KB)
4. **ì›ìì  ì“°ê¸°**: ì„ì‹œ íŒŒì¼ ìƒì„± â†’ ê²€ì¦ â†’ ì´ë¦„ ë³€ê²½

### TTS ì†ŒìŠ¤ ìš°ì„ ìˆœìœ„

1. **Dictionary API** (ë¬´ë£Œ)
   - ì •í™•í•œ ì˜ì–´ ë°œìŒ
   - ì œí•œ: ì‚¬ì „ì— ë“±ì¬ëœ ë‹¨ì–´ë§Œ
   
2. **ElevenLabs API** (ìœ ë£Œ)
   - ëª¨ë“  í…ìŠ¤íŠ¸ ì§€ì›
   - ë¹„ìš©: ~$0.0003/ë‹¨ì–´

## ì˜ˆìƒ ë¹„ìš©

- **Dictionary APIë¡œë§Œ**: $0 (100% ë¬´ë£Œ)
- **ElevenLabs í¬í•¨**: ì•½ 200ë‹¨ì–´ ê¸°ì¤€ $0.06

ëŒ€ë¶€ë¶„ì˜ ë‹¨ì–´ëŠ” Dictionary APIì—ì„œ ì²˜ë¦¬ë˜ë¯€ë¡œ ì‹¤ì œ ë¹„ìš©ì€ ë§¤ìš° ì ìŠµë‹ˆë‹¤.

## ì§„í–‰ ìƒí™© ì˜ˆì‹œ

```
ğŸµ TTS Audio Pre-generation Script
======================================================================

ğŸ“‹ Collecting words from CSV files...
ğŸ“‚ Found 45 CSV files
   Found 234 unique words

ğŸ” Checking for existing audio files...
   âœ… Already generated: 150 words
   â³ Need to generate: 84 words
   ğŸ”‘ ElevenLabs API key: configured

ğŸš€ Ready to generate 84 audio files
   Output directory: /home/user/voca_test/docs/audio

Proceed? [y/N]: y

âš™ï¸  Generating audio files...
======================================================================
Progress: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 84/84 [02:15<00:00, 0.62word/s]

  âœ… Generated: abandon (Dictionary, 24576 bytes)
  âœ… Generated: ability (Dictionary, 28672 bytes)
  â­ï¸  Skipped: hello (already exists)
  ...

======================================================================
ğŸ“Š Generation Summary
======================================================================
   âœ… Successfully generated: 84
   â­ï¸  Skipped (already exist): 0
   âŒ Failed: 0
   ğŸ“ Total files in audio/: 234

âœ¨ Done!
```

## íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### íŒŒì¼ì´ ë„ˆë¬´ ì‘ë‹¤ëŠ” ê²½ê³ ê°€ ëœ¨ëŠ” ê²½ìš°

```
âš ï¸  Invalid file (too small: 512 bytes): word_12345678.mp3
```

- ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ë¡œ íŒŒì¼ì´ ì œëŒ€ë¡œ ë‹¤ìš´ë¡œë“œë˜ì§€ ì•Šì•˜ì„ ê°€ëŠ¥ì„±
- ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë‹¤ì‹œ ì‹¤í–‰í•˜ë©´ í•´ë‹¹ íŒŒì¼ì„ ì¬ìƒì„±í•©ë‹ˆë‹¤

### Dictionary APIì—ì„œ ì°¾ì„ ìˆ˜ ì—†ëŠ” ë‹¨ì–´

- ElevenLabs API í‚¤ë¥¼ ì„¤ì •í•˜ë©´ ìë™ìœ¼ë¡œ fallbackë©ë‹ˆë‹¤
- API í‚¤ê°€ ì—†ìœ¼ë©´ í•´ë‹¹ ë‹¨ì–´ëŠ” ê±´ë„ˆëœë‹ˆë‹¤

### ì¤‘ë‹¨ í›„ ì¬ê°œ

ìŠ¤í¬ë¦½íŠ¸ëŠ” ì´ë¯¸ ìƒì„±ëœ íŒŒì¼ì„ ê±´ë„ˆë›°ë¯€ë¡œ, ì–¸ì œë“ ì§€ ì¤‘ë‹¨í•˜ê³  ë‹¤ì‹œ ì‹œì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```bash
# Ctrl+Cë¡œ ì¤‘ë‹¨
^C

# ë‚˜ì¤‘ì— ë‹¤ì‹œ ì‹¤í–‰
python3 generate_audio.py  # ì´ë¯¸ ìƒì„±ëœ íŒŒì¼ì€ ê±´ë„ˆëœ€
```

## ì›¹ ì•± ì—°ë™

ìƒì„±ëœ ì˜¤ë””ì˜¤ íŒŒì¼ì„ ì‚¬ìš©í•˜ë„ë¡ `docs/js/tts.js` ìˆ˜ì •:

```javascript
// ê¸°ì¡´: API í˜¸ì¶œ
const blob = await fetchFromAPI(word);

// ë³€ê²½: ë¡œì»¬ íŒŒì¼ ìš°ì„ 
const audioFile = `audio/${getAudioFilename(word)}`;
const response = await fetch(audioFile);
if (response.ok) {
    const blob = await response.blob();
    // ... ì¬ìƒ
}
```

ì´ë ‡ê²Œ í•˜ë©´:
- âœ… ë¹ ë¥¸ ë¡œë”© (CDN ìºì‹±)
- âœ… API ë¹„ìš© ì ˆê°
- âœ… ì˜¤í”„ë¼ì¸ ì§€ì› ê°€ëŠ¥
